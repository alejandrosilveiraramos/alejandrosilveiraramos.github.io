(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[307],{6062:(e,t,s)=>{Promise.resolve().then(s.bind(s,8136))},8136:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>eu});var a=s(5155),n=s(2115),r=s(6874),l=s.n(r),i=s(7340),o=s(9946);let d=(0,o.A)("minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]);var c=s(4616);let u=(0,o.A)("maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);var m=s(285),x=s(6695),h=s(4165),f=s(5185),v=s(6081),p=s(7328),g=s(6101),j=s(1285),b=s(3655),w=s(9033),N=s(5845),y=s(4315),k="rovingFocusGroup.onEntryFocus",D={bubbles:!1,cancelable:!0},I="RovingFocusGroup",[T,A,E]=(0,p.N)(I),[S,C]=(0,v.A)(I,[E]),[M,F]=S(I),R=n.forwardRef((e,t)=>(0,a.jsx)(T.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,a.jsx)(T.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,a.jsx)(L,{...e,ref:t})})}));R.displayName=I;var L=n.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:s,orientation:r,loop:l=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:m=!1,...x}=e,h=n.useRef(null),v=(0,g.s)(t,h),p=(0,y.jH)(i),[j,T]=(0,N.i)({prop:o,defaultProp:null!=d?d:null,onChange:c,caller:I}),[E,S]=n.useState(!1),C=(0,w.c)(u),F=A(s),R=n.useRef(!1),[L,_]=n.useState(0);return n.useEffect(()=>{let e=h.current;if(e)return e.addEventListener(k,C),()=>e.removeEventListener(k,C)},[C]),(0,a.jsx)(M,{scope:s,orientation:r,dir:p,loop:l,currentTabStopId:j,onItemFocus:n.useCallback(e=>T(e),[T]),onItemShiftTab:n.useCallback(()=>S(!0),[]),onFocusableItemAdd:n.useCallback(()=>_(e=>e+1),[]),onFocusableItemRemove:n.useCallback(()=>_(e=>e-1),[]),children:(0,a.jsx)(b.sG.div,{tabIndex:E||0===L?-1:0,"data-orientation":r,...x,ref:v,style:{outline:"none",...e.style},onMouseDown:(0,f.m)(e.onMouseDown,()=>{R.current=!0}),onFocus:(0,f.m)(e.onFocus,e=>{let t=!R.current;if(e.target===e.currentTarget&&t&&!E){let t=new CustomEvent(k,D);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=F().filter(e=>e.focusable);K([e.find(e=>e.active),e.find(e=>e.id===j),...e].filter(Boolean).map(e=>e.ref.current),m)}}R.current=!1}),onBlur:(0,f.m)(e.onBlur,()=>S(!1))})})}),_="RovingFocusGroupItem",z=n.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:s,focusable:r=!0,active:l=!1,tabStopId:i,children:o,...d}=e,c=(0,j.B)(),u=i||c,m=F(_,s),x=m.currentTabStopId===u,h=A(s),{onFocusableItemAdd:v,onFocusableItemRemove:p,currentTabStopId:g}=m;return n.useEffect(()=>{if(r)return v(),()=>p()},[r,v,p]),(0,a.jsx)(T.ItemSlot,{scope:s,id:u,focusable:r,active:l,children:(0,a.jsx)(b.sG.span,{tabIndex:x?0:-1,"data-orientation":m.orientation,...d,ref:t,onMouseDown:(0,f.m)(e.onMouseDown,e=>{r?m.onItemFocus(u):e.preventDefault()}),onFocus:(0,f.m)(e.onFocus,()=>m.onItemFocus(u)),onKeyDown:(0,f.m)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void m.onItemShiftTab();if(e.target!==e.currentTarget)return;let t=function(e,t,s){var a;let n=(a=e.key,"rtl"!==s?a:"ArrowLeft"===a?"ArrowRight":"ArrowRight"===a?"ArrowLeft":a);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(n))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(n)))return G[n]}(e,m.orientation,m.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let s=h().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)s.reverse();else if("prev"===t||"next"===t){"prev"===t&&s.reverse();let a=s.indexOf(e.currentTarget);s=m.loop?function(e,t){return e.map((s,a)=>e[(t+a)%e.length])}(s,a+1):s.slice(a+1)}setTimeout(()=>K(s))}}),children:"function"==typeof o?o({isCurrentTabStop:x,hasTabStop:null!=g}):o})})});z.displayName=_;var G={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function K(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=document.activeElement;for(let a of e)if(a===s||(a.focus({preventScroll:t}),document.activeElement!==s))return}var H=s(8905),P="Tabs",[V,B]=(0,v.A)(P,[C]),O=C(),[Z,$]=V(P),U=n.forwardRef((e,t)=>{let{__scopeTabs:s,value:n,onValueChange:r,defaultValue:l,orientation:i="horizontal",dir:o,activationMode:d="automatic",...c}=e,u=(0,y.jH)(o),[m,x]=(0,N.i)({prop:n,onChange:r,defaultProp:null!=l?l:"",caller:P});return(0,a.jsx)(Z,{scope:s,baseId:(0,j.B)(),value:m,onValueChange:x,orientation:i,dir:u,activationMode:d,children:(0,a.jsx)(b.sG.div,{dir:u,"data-orientation":i,...c,ref:t})})});U.displayName=P;var q="TabsList",J=n.forwardRef((e,t)=>{let{__scopeTabs:s,loop:n=!0,...r}=e,l=$(q,s),i=O(s);return(0,a.jsx)(R,{asChild:!0,...i,orientation:l.orientation,dir:l.dir,loop:n,children:(0,a.jsx)(b.sG.div,{role:"tablist","aria-orientation":l.orientation,...r,ref:t})})});J.displayName=q;var Q="TabsTrigger",W=n.forwardRef((e,t)=>{let{__scopeTabs:s,value:n,disabled:r=!1,...l}=e,i=$(Q,s),o=O(s),d=ee(i.baseId,n),c=et(i.baseId,n),u=n===i.value;return(0,a.jsx)(z,{asChild:!0,...o,focusable:!r,active:u,children:(0,a.jsx)(b.sG.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:d,...l,ref:t,onMouseDown:(0,f.m)(e.onMouseDown,e=>{r||0!==e.button||!1!==e.ctrlKey?e.preventDefault():i.onValueChange(n)}),onKeyDown:(0,f.m)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&i.onValueChange(n)}),onFocus:(0,f.m)(e.onFocus,()=>{let e="manual"!==i.activationMode;u||r||!e||i.onValueChange(n)})})})});W.displayName=Q;var X="TabsContent",Y=n.forwardRef((e,t)=>{let{__scopeTabs:s,value:r,forceMount:l,children:i,...o}=e,d=$(X,s),c=ee(d.baseId,r),u=et(d.baseId,r),m=r===d.value,x=n.useRef(m);return n.useEffect(()=>{let e=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,a.jsx)(H.C,{present:l||m,children:s=>{let{present:n}=s;return(0,a.jsx)(b.sG.div,{"data-state":m?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":c,hidden:!n,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:x.current?"0s":void 0},children:n&&i})}})});function ee(e,t){return"".concat(e,"-trigger-").concat(t)}function et(e,t){return"".concat(e,"-content-").concat(t)}Y.displayName=X;var es=s(9434);function ea(e){let{className:t,...s}=e;return(0,a.jsx)(U,{"data-slot":"tabs",className:(0,es.cn)("flex flex-col gap-2",t),...s})}function en(e){let{className:t,...s}=e;return(0,a.jsx)(J,{"data-slot":"tabs-list",className:(0,es.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...s})}function er(e){let{className:t,...s}=e;return(0,a.jsx)(W,{"data-slot":"tabs-trigger",className:(0,es.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s})}function el(e){let{className:t,...s}=e;return(0,a.jsx)(Y,{"data-slot":"tabs-content",className:(0,es.cn)("flex-1 outline-none",t),...s})}var ei=s(5819);let eo=(0,o.A)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var ed=s(4186);function ec(e){let{onSessionClick:t}=e,[s,r]=(0,n.useState)((0,ei.S5)());(0,n.useEffect)(()=>{(0,ei.SD)(),r((0,ei.S5)());let e=setInterval(()=>{r(e=>e.map(e=>{let t=e.stages.map(e=>{if(!e.endTime){let t=new Date(e.startTime).getTime(),s=Math.floor((new Date().getTime()-t)/6e4);return{...e,duration:s}}return e});return{...e,stages:t}}))},1e3),t=()=>{r((0,ei.S5)())};return window.addEventListener(ei.Sv,t),()=>{clearInterval(e),window.removeEventListener(ei.Sv,t)}},[]);let l=e=>{let t=e.expectedDuration||5,s=e.duration/t;return s<.7?"bg-green-100 border-green-300":s<1?"bg-yellow-100 border-yellow-300":"bg-red-100 border-red-300"},i=e=>{let t=e.expectedDuration||5;return e.duration>t};return(0,a.jsx)("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-3",children:s.map(e=>(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between rounded-2xl bg-white p-4 shadow-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:e.operatorName}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["ID da sess\xe3o: ",e.id]})]}),(0,a.jsx)(m.$,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full",onClick:()=>t(e.id),children:(0,a.jsx)(eo,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"relative space-y-4 pl-6",children:[(0,a.jsx)("div",{className:"absolute left-3 top-0 h-full w-0.5 bg-gray-200"}),e.stages.map((t,s)=>{let n=!t.endTime,r=l(t),o=i(t)&&n?"pulsate":"";return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute -left-6 top-1/2 h-3 w-3 -translate-y-1/2 rounded-full bg-gray-400"}),(0,a.jsxs)("div",{className:"relative rounded-2xl border-2 p-4 shadow-sm transition-all ".concat(r," ").concat(o),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h4",{className:"font-medium",children:t.name}),(0,a.jsxs)("div",{className:"flex items-center gap-1 rounded-full bg-white px-2 py-1 text-xs",children:[(0,a.jsx)(ed.A,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:[t.duration," min"]})]})]}),t.notes&&(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:t.notes}),s<e.stages.length-1&&(0,a.jsx)("svg",{className:"absolute -bottom-4 left-1/2 z-10 h-4 w-8 -translate-x-1/2",viewBox:"0 0 24 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M12 12L24 0H0L12 12Z",fill:"#E5E7EB"})})]})]},s)})]})]},e.id))})}function eu(){let[e,t]=(0,n.useState)(!1),[s,r]=(0,n.useState)(null),[o,f]=(0,n.useState)(1),[v,p]=(0,n.useState)(null);return(0,n.useEffect)(()=>{s&&p((0,ei.Ht)(s));let e=e=>{var t,a;s&&(null==(a=e.detail)||null==(t=a.session)?void 0:t.id)===s&&p((0,ei.Ht)(s))};return window.addEventListener(ei.Sv,e),()=>{window.removeEventListener(ei.Sv,e)}},[s]),(0,a.jsxs)("div",{className:"flex h-screen flex-col bg-gray-50",children:[(0,a.jsxs)("header",{className:"flex h-16 items-center justify-between border-b bg-white px-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l(),{href:"/",children:(0,a.jsx)(m.$,{variant:"ghost",size:"icon",children:(0,a.jsx)(i.A,{className:"h-5 w-5"})})}),(0,a.jsx)("h1",{className:"text-xl font-semibold",children:"Vis\xe3o geral de atendimentos"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(m.$,{variant:"outline",size:"sm",onClick:()=>f(e=>Math.max(.5,e-.1)),disabled:o<=.5,children:[(0,a.jsx)(d,{className:"mr-2 h-4 w-4"}),"Diminuir Zoom"]}),(0,a.jsxs)(m.$,{variant:"outline",size:"sm",onClick:()=>f(e=>Math.min(1.5,e+.1)),disabled:o>=1.5,children:[(0,a.jsx)(c.A,{className:"mr-2 h-4 w-4"}),"Aumentar Zoom"]}),(0,a.jsx)(m.$,{variant:"outline",size:"icon",onClick:()=>{document.fullscreenElement?document.exitFullscreen().then(()=>{t(!1)}):document.documentElement.requestFullscreen().then(()=>{t(!0)})},children:(0,a.jsx)(u,{className:"h-5 w-5"})})]})]}),(0,a.jsx)("main",{className:"flex-1 overflow-hidden p-6",children:(0,a.jsx)(x.Zp,{className:"h-full overflow-hidden rounded-2xl border shadow-sm",children:(0,a.jsx)("div",{className:"h-full overflow-auto p-6",children:(0,a.jsx)("div",{style:{transform:"scale(".concat(o,")"),transformOrigin:"top left",transition:"transform 0.3s ease"},children:(0,a.jsx)(ec,{onSessionClick:e=>{r(e),p((0,ei.Ht)(e))}})})})})}),(0,a.jsx)(h.lG,{open:!!s,onOpenChange:()=>{r(null),p(null)},children:(0,a.jsxs)(h.Cf,{className:"max-w-3xl",children:[(0,a.jsx)(h.c7,{children:(0,a.jsxs)(h.L3,{className:"text-xl",children:["Detalhes da sess\xe3o: ",null==v?void 0:v.id," -"," ",null==v?void 0:v.operatorName]})}),(0,a.jsxs)(ea,{defaultValue:"timeline",children:[(0,a.jsxs)(en,{className:"grid w-full grid-cols-2",children:[(0,a.jsx)(er,{value:"timeline",children:"Linha do tempo"}),(0,a.jsx)(er,{value:"details",children:"Detalhes da sess\xe3o"})]}),(0,a.jsx)(el,{value:"timeline",className:"space-y-4 pt-4",children:(0,a.jsxs)("div",{className:"rounded-lg border p-4",children:[(0,a.jsx)("h3",{className:"mb-4 text-lg font-medium",children:"Linha do tempo da sess\xe3o"}),(0,a.jsx)("div",{className:"space-y-4",children:null==v?void 0:v.stages.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-gray-100",children:t+1}),(0,a.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"font-medium",children:e.name}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[new Date(e.startTime).toLocaleTimeString()," -",e.endTime?new Date(e.endTime).toLocaleTimeString():"In Progress"]})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Dura\xe7\xe3o: ",e.duration," minutos"]}),e.notes&&(0,a.jsxs)("p",{className:"text-sm italic text-gray-500",children:['"',e.notes,'"']})]})]},t))})]})}),(0,a.jsx)(el,{value:"details",className:"space-y-4 pt-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"rounded-lg border p-4",children:[(0,a.jsx)("h3",{className:"mb-2 font-medium",children:"Informa\xe7\xe3o do operador"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Nome: ",null==v?void 0:v.operatorName]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["ID: ",null==v?void 0:v.operatorId]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Departamento: Customer Service//ATUALIZAR COM DADO"})]}),(0,a.jsxs)("div",{className:"rounded-lg border p-4",children:[(0,a.jsx)("h3",{className:"mb-2 font-medium",children:"Informa\xe7\xe3o do cliente"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["ID: ",null==v?void 0:v.customerId]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Tipo: ",null==v?void 0:v.customerType]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Prioridade: ",null==v?void 0:v.priority]})]}),(0,a.jsxs)("div",{className:"col-span-2 rounded-lg border p-4",children:[(0,a.jsx)("h3",{className:"mb-2 font-medium",children:"Est\xe1tisticas da sess\xe3o"}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Dura\xe7\xe3o total"}),(0,a.jsxs)("p",{className:"text-2xl font-bold",children:[null==v?void 0:v.stages.reduce((e,t)=>e+t.duration,0)," ","min"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Est\xe1gios completos"}),(0,a.jsxs)("p",{className:"text-2xl font-bold",children:[null==v?void 0:v.stages.filter(e=>e.endTime).length,"/",null==v?void 0:v.stages.length]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Status"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:null==v?void 0:v.status})]})]})]})]})})]})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[874,29,409,441,684,358],()=>t(6062)),_N_E=e.O()}]);